var gdjs;(function(h){class B{constructor(e,t){this.frameTime=0;this.stepped=!1;this.timeScale=1;this._nextJointId=1;this.joints={};this.gravityX=t.gravityX,this.gravityY=t.gravityY,this.scaleX=t.scaleX===0?100:t.scaleX,this.scaleY=t.scaleY===0?100:t.scaleY,this.invScaleX=1/this.scaleX,this.invScaleY=1/this.scaleY,this.timeStep=1/60,this.world=new Box2D.b2World(new Box2D.b2Vec2(this.gravityX,this.gravityY),!0),this.staticBody=this.world.CreateBody(new Box2D.b2BodyDef),this.contactListener=new Box2D.JSContactListener,this.contactListener.BeginContact=function(i){const s=Box2D.wrapPointer(i,Box2D.b2Contact);if(s.GetFixtureA().GetBody()===null||s.GetFixtureB().GetBody()===null)return;const n=s.GetFixtureA().GetBody().gdjsAssociatedBehavior,o=s.GetFixtureB().GetBody().gdjsAssociatedBehavior;n.currentContacts.push(o),o.currentContacts.push(n)},this.contactListener.EndContact=function(i){const s=Box2D.wrapPointer(i,Box2D.b2Contact);if(s.GetFixtureA().GetBody()===null||s.GetFixtureB().GetBody()===null)return;const n=s.GetFixtureA().GetBody().gdjsAssociatedBehavior,o=s.GetFixtureB().GetBody().gdjsAssociatedBehavior;let a=n.currentContacts.indexOf(o);a!==-1&&n.currentContacts.splice(a,1),a=o.currentContacts.indexOf(n),a!==-1&&o.currentContacts.splice(a,1)},this.contactListener.PreSolve=function(){},this.contactListener.PostSolve=function(){},this.world.SetContactListener(this.contactListener)}static getSharedData(e,t){if(!e.physics2SharedData){const i=e.getInitialSharedDataForBehavior(t);e.physics2SharedData=new h.Physics2SharedData(e,i)}return e.physics2SharedData}step(e){if(this.frameTime+=e,this.frameTime>=this.timeStep){let t=Math.floor(this.frameTime/this.timeStep);this.frameTime-=t*this.timeStep,t>5&&(t=5);for(let i=0;i<t;i++)this.world.Step(this.timeStep*this.timeScale,8,10);this.world.ClearForces()}this.stepped=!0}clearBodyJoints(e){for(const t in this.joints)this.joints.hasOwnProperty(t)&&(this.joints[t].GetBodyA()===e||this.joints[t].GetBodyB()===e)&&this.removeJoint(t)}addJoint(e){return this.joints[this._nextJointId.toString(10)]=e,this._nextJointId++}getJoint(e){return e=e.toString(10),this.joints.hasOwnProperty(e)?this.joints[e]:null}getJointId(e){for(const t in this.joints)if(this.joints.hasOwnProperty(t)&&this.joints[t]===e)return parseInt(t,10);return 0}removeJoint(e){if(e=e.toString(10),this.joints.hasOwnProperty(e)){const t=this.joints[e];if(t.GetType()===Box2D.e_revoluteJoint||t.GetType()===Box2D.e_prismaticJoint)for(const i in this.joints)this.joints.hasOwnProperty(i)&&this.joints[i].GetType()===Box2D.e_gearJoint&&(Box2D.getPointer(this.joints[i].GetJoint1())===Box2D.getPointer(t)||Box2D.getPointer(this.joints[i].GetJoint2())===Box2D.getPointer(t))&&this.removeJoint(parseInt(i,10));this.world.DestroyJoint(t),delete this.joints[e]}}}h.Physics2SharedData=B,h.registerRuntimeSceneUnloadedCallback(function(p){p.physics2SharedData&&p.physics2SharedData.world&&Box2D.destroy(p.physics2SharedData.world)});class b extends h.RuntimeBehavior{constructor(e,t,i){super(e,t,i);this.shapeScale=1;this._body=null;this._objectOldX=0;this._objectOldY=0;this._objectOldAngle=0;this._objectOldWidth=0;this._objectOldHeight=0;this._verticesBuffer=0;this.bodyType=t.bodyType,this.bullet=t.bullet,this.fixedRotation=t.fixedRotation,this.canSleep=t.canSleep,this.shape=t.shape,this.shapeDimensionA=t.shapeDimensionA,this.shapeDimensionB=t.shapeDimensionB,this.shapeOffsetX=t.shapeOffsetX,this.shapeOffsetY=t.shapeOffsetY,this.polygonOrigin=t.polygonOrigin,this.polygon=this.shape==="Polygon"?b.getPolygon(t.vertices):null,this.density=t.density,this.friction=t.friction,this.restitution=t.restitution,this.linearDamping=t.linearDamping,this.angularDamping=t.angularDamping,this.gravityScale=t.gravityScale,this.layers=t.layers,this.masks=t.masks,this.currentContacts=this.currentContacts||[],this.currentContacts.length=0,this._sharedData=B.getSharedData(e,t.name),this._tempb2Vec2=new Box2D.b2Vec2,this._tempb2Vec2Sec=new Box2D.b2Vec2}b2Vec2(e,t){return this._tempb2Vec2.set_x(e),this._tempb2Vec2.set_y(t),this._tempb2Vec2}b2Vec2Sec(e,t){return this._tempb2Vec2Sec.set_x(e),this._tempb2Vec2Sec.set_y(t),this._tempb2Vec2Sec}updateFromBehaviorData(e,t){return e.bullet!==t.bullet&&this.setBullet(t.bullet),e.fixedRotation!==t.fixedRotation&&this.setFixedRotation(t.fixedRotation),e.canSleep!==t.canSleep&&this.setSleepingAllowed(t.canSleep),e.shapeDimensionA!==t.shapeDimensionA&&(this.shapeDimensionA=t.shapeDimensionA,this.recreateShape()),e.shapeDimensionB!==t.shapeDimensionB&&(this.shapeDimensionB=t.shapeDimensionB,this.recreateShape()),e.shapeOffsetX!==t.shapeOffsetX&&(this.shapeOffsetX=t.shapeOffsetX,this.recreateShape()),e.shapeOffsetY!==t.shapeOffsetY&&(this.shapeOffsetY=t.shapeOffsetY,this.recreateShape()),e.polygonOrigin!==t.polygonOrigin&&(this.polygonOrigin=t.polygonOrigin,this.recreateShape()),e.density!==t.density&&this.setDensity(t.density),e.friction!==t.friction&&this.setFriction(t.friction),e.restitution!==t.restitution&&this.setRestitution(t.restitution),e.linearDamping!==t.linearDamping&&this.setLinearDamping(t.linearDamping),e.angularDamping!==t.angularDamping&&this.setAngularDamping(t.angularDamping),e.gravityScale!==t.gravityScale&&this.setGravityScale(t.gravityScale),!(e.layers!==t.layers||e.masks!==t.masks||e.vertices!==t.vertices||e.bodyType!==t.bodyType||e.shape!==t.shape)}onDeActivate(){this._body!==null&&(this._sharedData.clearBodyJoints(this._body),this._verticesBuffer&&(Box2D._free(this._verticesBuffer),this._verticesBuffer=0),this._sharedData.world.DestroyBody(this._body),this._body=null)}onDestroy(){this.onDeActivate()}static getPolygon(e){if(!e)return null;const t=new h.Polygon,i=8;for(let s=0,n=e.length;s<Math.min(n,i);s++)t.vertices.push([e[s].x,e[s].y]);return t}static isPolygonConvex(e){if(!e.isConvex())return!1;let t=!0,i=!0;for(let s=0;s<e.vertices.length-1;++s){for(let n=s+1;n<e.vertices.length;++n)if(e.vertices[s][0]===e.vertices[n][0]&&e.vertices[s][1]===e.vertices[n][1])return!1;e.vertices[s][0]!==e.vertices[s+1][0]&&(t=!1),e.vertices[s][1]!==e.vertices[s+1][1]&&(i=!1)}return!(t||i)}createShape(){const e=this.shapeOffsetX?this.shapeOffsetX*this.shapeScale*this._sharedData.invScaleX:0,t=this.shapeOffsetY?this.shapeOffsetY*this.shapeScale*this._sharedData.invScaleY:0;let i;if(this.shape==="Circle"){if(i=new Box2D.b2CircleShape,this.shapeDimensionA>0)i.set_m_radius(this.shapeDimensionA*this.shapeScale*this._sharedData.invScaleX);else{const o=(this.owner.getWidth()*this._sharedData.invScaleX+this.owner.getHeight()*this._sharedData.invScaleY)/4;i.set_m_radius(o>0?o:1)}i.set_m_p(this.b2Vec2(e,t))}else if(this.shape==="Polygon")if(i=new Box2D.b2PolygonShape,!this.polygon||!b.isPolygonConvex(this.polygon)){let o=(this.owner.getWidth()>0?this.owner.getWidth():1)*this._sharedData.invScaleX,a=(this.owner.getHeight()>0?this.owner.getHeight():1)*this._sharedData.invScaleY;i.SetAsBox(o/2,a/2,this.b2Vec2(e,t),0)}else{let o=0,a=0;if(this.polygonOrigin==="Origin"?(o=(this.owner.getWidth()>0?-this.owner.getWidth()/2:0)+(this.owner.getX()-this.owner.getDrawableX()),a=(this.owner.getHeight()>0?-this.owner.getHeight()/2:0)+(this.owner.getY()-this.owner.getDrawableY())):this.polygonOrigin==="TopLeft"&&(o=this.owner.getWidth()>0?-this.owner.getWidth()/2:0,a=this.owner.getHeight()>0?-this.owner.getHeight()/2:0),!this._verticesBuffer){const c=Box2D._malloc(this.polygon.vertices.length*8,"float",Box2D.ALLOC_STACK);this._verticesBuffer=c}let l=0;for(let c=0,r=this.polygon.vertices.length;c<r;c++)Box2D.HEAPF32[this._verticesBuffer+l>>2]=(this.polygon.vertices[c][0]*this.shapeScale+o)*this._sharedData.invScaleX+e,Box2D.HEAPF32[this._verticesBuffer+(l+4)>>2]=(this.polygon.vertices[c][1]*this.shapeScale+a)*this._sharedData.invScaleY+t,l+=8;const _=Box2D.wrapPointer(this._verticesBuffer,Box2D.b2Vec2);i.Set(_,this.polygon.vertices.length)}else if(this.shape==="Edge"){i=new Box2D.b2EdgeShape;const o=(this.shapeDimensionA>0?this.shapeDimensionA*this.shapeScale:this.owner.getWidth()>0?this.owner.getWidth():1)*this._sharedData.invScaleX;let a=this.owner.getHeight()>0?this.owner.getHeight()*this._sharedData.invScaleY:0;const l=this.shapeDimensionB?h.toRad(this.shapeDimensionB):0;i.Set(this.b2Vec2(-o/2*Math.cos(l)+e,a/2-o/2*Math.sin(l)+t),this.b2Vec2Sec(o/2*Math.cos(l)+e,a/2+o/2*Math.sin(l)+t))}else{i=new Box2D.b2PolygonShape;let o=(this.shapeDimensionA>0?this.shapeDimensionA*this.shapeScale:this.owner.getWidth()>0?this.owner.getWidth():1)*this._sharedData.invScaleX,a=(this.shapeDimensionB>0?this.shapeDimensionB*this.shapeScale:this.owner.getHeight()>0?this.owner.getHeight():1)*this._sharedData.invScaleY;i.SetAsBox(o/2,a/2,this.b2Vec2(e,t),0)}const s=new Box2D.b2Filter;s.set_categoryBits(this.layers),s.set_maskBits(this.masks);const n=new Box2D.b2FixtureDef;return n.set_shape(i),n.set_filter(s),this.density<0&&(this.density=0),n.set_density(this.density),this.friction<0&&(this.friction=0),n.set_friction(this.friction),this.restitution<0&&(this.restitution=0),n.set_restitution(this.restitution),n}recreateShape(){if(this._body===null){this.createBody();return}this._body.DestroyFixture(this._body.GetFixtureList()),this._body.CreateFixture(this.createShape()),this._objectOldWidth=this.owner.getWidth(),this._objectOldHeight=this.owner.getHeight()}getShapeScale(){return this.shapeScale}setShapeScale(e){e!==this.shapeScale&&e>0&&(this.shapeScale=e,this.recreateShape())}getBody(){return this._body===null&&this.createBody(),this._body}createBody(){const e=new Box2D.b2BodyDef;e.set_position(this.b2Vec2((this.owner.getDrawableX()+this.owner.getWidth()/2)*this._sharedData.invScaleX,(this.owner.getDrawableY()+this.owner.getHeight()/2)*this._sharedData.invScaleY)),e.set_angle(h.toRad(this.owner.getAngle())),e.set_type(this.bodyType==="Static"?Box2D.b2_staticBody:this.bodyType==="Kinematic"?Box2D.b2_kinematicBody:Box2D.b2_dynamicBody),e.set_bullet(this.bullet),e.set_fixedRotation(this.fixedRotation),e.set_allowSleep(this.canSleep),e.set_linearDamping(this.linearDamping),e.set_angularDamping(this.angularDamping),e.set_gravityScale(this.gravityScale),this._body=this._sharedData.world.CreateBody(e),this._body.CreateFixture(this.createShape()),this._body.gdjsAssociatedBehavior=this,this._objectOldWidth=this.owner.getWidth(),this._objectOldHeight=this.owner.getHeight()}doStepPreEvents(e){this._body===null&&this.createBody(),this._sharedData.stepped||this._sharedData.step(e.getTimeManager().getElapsedTime()/1e3),this.owner.setX(this._body.GetPosition().get_x()*this._sharedData.scaleX-this.owner.getWidth()/2+this.owner.getX()-this.owner.getDrawableX()),this.owner.setY(this._body.GetPosition().get_y()*this._sharedData.scaleY-this.owner.getHeight()/2+this.owner.getY()-this.owner.getDrawableY()),this.owner.setAngle(h.toDegrees(this._body.GetAngle())),this._objectOldX=this.owner.getX(),this._objectOldY=this.owner.getY(),this._objectOldAngle=this.owner.getAngle()}doStepPostEvents(e){this._updateBodyFromObject(),this._sharedData.stepped=!1}onObjectHotReloaded(){this._updateBodyFromObject()}_updateBodyFromObject(){if(this._body===null&&this.createBody(),(this._objectOldWidth!==this.owner.getWidth()&&this.shapeDimensionA<=0||this._objectOldHeight!==this.owner.getHeight()&&this.shape!=="Edge"&&!(this.shape==="Box"&&this.shapeDimensionB>0)&&!(this.shape==="Circle"&&this.shapeDimensionA>0))&&this.recreateShape(),this._objectOldX!==this.owner.getX()||this._objectOldY!==this.owner.getY()||this._objectOldAngle!==this.owner.getAngle()){const e=this.b2Vec2((this.owner.getDrawableX()+this.owner.getWidth()/2)*this._sharedData.invScaleX,(this.owner.getDrawableY()+this.owner.getHeight()/2)*this._sharedData.invScaleY);this._body.SetTransform(e,h.toRad(this.owner.getAngle())),this._body.SetAwake(!0)}}getGravityX(){return this._sharedData.gravityX}getGravityY(){return this._sharedData.gravityY}setGravity(e,t){this._sharedData.gravityX===e&&this._sharedData.gravityY===t||(this._sharedData.gravityX=e,this._sharedData.gravityY=t,this._sharedData.world.SetGravity(this.b2Vec2(this._sharedData.gravityX,this._sharedData.gravityY)))}getTimeScale(){return this._sharedData.timeScale}setTimeScale(e){e<0||(this._sharedData.timeScale=e)}static setTimeScaleFromObject(e,t,i){e===null||!e.hasBehavior(t)||e.getBehavior(t).setTimeScale(i)}isDynamic(){return this.bodyType==="Dynamic"}setDynamic(){if(this.bodyType!=="Dynamic"){if(this.bodyType="Dynamic",this._body===null){this.createBody();return}this._body.SetType(Box2D.b2_dynamicBody),this._body.SetAwake(!0)}}isStatic(){return this.bodyType==="Static"}setStatic(){if(this.bodyType!=="Static"){if(this.bodyType="Static",this._body===null){this.createBody();return}this._body.SetType(Box2D.b2_staticBody),this._body.SetAwake(!0)}}isKinematic(){return this.bodyType==="Kinematic"}setKinematic(){if(this.bodyType!=="Kinematic"){if(this.bodyType="Kinematic",this._body===null){this.createBody();return}this._body.SetType(Box2D.b2_kinematicBody),this._body.SetAwake(!0)}}isBullet(){return this.bullet}setBullet(e){if(this.bullet!==e){if(this.bullet=e,this._body===null){this.createBody();return}this._body.SetBullet(this.bullet)}}hasFixedRotation(){return this.fixedRotation}setFixedRotation(e){if(this.fixedRotation=e,this._body===null){this.createBody();return}this._body.SetFixedRotation(this.fixedRotation)}isSleepingAllowed(){return this.canSleep}setSleepingAllowed(e){if(this.canSleep=e,this._body===null){this.createBody();return}this._body.SetSleepingAllowed(this.canSleep)}isSleeping(){return this._body===null&&this.createBody(),!this._body.IsAwake()}getDensity(){return this.density}setDensity(e){if(e<0&&(e=0),this.density!==e){if(this.density=e,this._body===null){this.createBody();return}this._body.GetFixtureList().SetDensity(this.density),this._body.ResetMassData()}}getFriction(){return this.friction}setFriction(e){if(e<0&&(e=0),this.friction===e)return;if(this.friction=e,this._body===null){this.createBody();return}this._body.GetFixtureList().SetFriction(this.friction);let t=this._body.GetContactList();for(;Box2D.getPointer(t);)t.get_contact().ResetFriction(),t=t.get_next()}getRestitution(){return this.restitution}setRestitution(e){if(e<0&&(e=0),this.restitution===e)return;if(this.restitution=e,this._body===null){this.createBody();return}this._body.GetFixtureList().SetRestitution(this.restitution);let t=this._body.GetContactList();for(;Box2D.getPointer(t);)t.get_contact().ResetRestitution(),t=t.get_next()}getLinearDamping(){return this.linearDamping}setLinearDamping(e){if(this.linearDamping!==e){if(this.linearDamping=e,this._body===null){this.createBody();return}this._body.SetLinearDamping(this.linearDamping)}}getAngularDamping(){return this.angularDamping}setAngularDamping(e){if(this.angularDamping!==e){if(this.angularDamping=e,this._body===null){this.createBody();return}this._body.SetAngularDamping(this.angularDamping)}}getGravityScale(){return this.gravityScale}setGravityScale(e){if(this.gravityScale!==e){if(this.gravityScale=e,this._body===null){this.createBody();return}this._body.SetGravityScale(this.gravityScale)}}layerEnabled(e){return e=Math.floor(e),e<1||e>16?!1:!!(this.layers&1<<e-1)}enableLayer(e,t){if(e=Math.floor(e),e<1||e>16)return;if(t?this.layers|=1<<e-1:this.layers&=~(1<<e-1),this._body===null){this.createBody();return}const i=this._body.GetFixtureList().GetFilterData();i.set_categoryBits(this.layers),this._body.GetFixtureList().SetFilterData(i)}maskEnabled(e){return e=Math.floor(e),e<1||e>16?!1:!!(this.masks&1<<e-1)}enableMask(e,t){if(e=Math.floor(e),e<1||e>16)return;if(t?this.masks|=1<<e-1:this.masks&=~(1<<e-1),this._body===null){this.createBody();return}const i=this._body.GetFixtureList().GetFilterData();i.set_maskBits(this.masks),this._body.GetFixtureList().SetFilterData(i)}getLinearVelocityX(){return this._body===null?(this.createBody(),0):this._body.GetLinearVelocity().get_x()*this._sharedData.scaleX}setLinearVelocityX(e){this._body===null&&this.createBody(),this._body.SetLinearVelocity(this.b2Vec2(e*this._sharedData.invScaleX,this._body.GetLinearVelocity().get_y()))}getLinearVelocityY(){return this._body===null?(this.createBody(),0):this._body.GetLinearVelocity().get_y()*this._sharedData.scaleY}setLinearVelocityY(e){this._body===null&&this.createBody(),this._body.SetLinearVelocity(this.b2Vec2(this._body.GetLinearVelocity().get_x(),e*this._sharedData.invScaleY))}getLinearVelocityLength(){return this._body===null?(this.createBody(),0):this.b2Vec2(this._body.GetLinearVelocity().get_x()*this._sharedData.scaleX,this._body.GetLinearVelocity().get_y()*this._sharedData.scaleY).Length()}getAngularVelocity(){return this._body===null&&this.createBody(),h.toDegrees(this._body.GetAngularVelocity())}setAngularVelocity(e){this._body===null&&this.createBody(),this._body.SetAngularVelocity(h.toRad(e))}applyForce(e,t,i,s){this._body===null&&this.createBody(),this._body.SetAwake(!0),this._body.ApplyForce(this.b2Vec2(e,t),this.b2Vec2Sec(i*this._sharedData.invScaleX,s*this._sharedData.invScaleY))}applyPolarForce(e,t,i,s){this._body===null&&this.createBody(),this._body.SetAwake(!0),e=h.toRad(e),this._body.ApplyForce(this.b2Vec2(t*Math.cos(e),t*Math.sin(e)),this.b2Vec2Sec(i*this._sharedData.invScaleX,s*this._sharedData.invScaleY))}applyForceTowardPosition(e,t,i,s,n){this._body===null&&this.createBody(),this._body.SetAwake(!0);const o=Math.atan2(i*this._sharedData.invScaleY-this._body.GetPosition().get_y(),t*this._sharedData.invScaleX-this._body.GetPosition().get_x());this._body.ApplyForce(this.b2Vec2(e*Math.cos(o),e*Math.sin(o)),this.b2Vec2Sec(s*this._sharedData.invScaleX,n*this._sharedData.invScaleY))}applyImpulse(e,t,i,s){this._body===null&&this.createBody(),this._body.SetAwake(!0),this._body.ApplyLinearImpulse(this.b2Vec2(e,t),this.b2Vec2Sec(i*this._sharedData.invScaleX,s*this._sharedData.invScaleY))}applyPolarImpulse(e,t,i,s){this._body===null&&this.createBody(),this._body.SetAwake(!0),e=h.toRad(e),this._body.ApplyLinearImpulse(this.b2Vec2(t*Math.cos(e),t*Math.sin(e)),this.b2Vec2Sec(i*this._sharedData.invScaleX,s*this._sharedData.invScaleY))}applyImpulseTowardPosition(e,t,i,s,n){this._body===null&&this.createBody(),this._body.SetAwake(!0);const o=Math.atan2(i*this._sharedData.invScaleY-this._body.GetPosition().get_y(),t*this._sharedData.invScaleX-this._body.GetPosition().get_x());this._body.ApplyLinearImpulse(this.b2Vec2(e*Math.cos(o),e*Math.sin(o)),this.b2Vec2Sec(s*this._sharedData.invScaleX,n*this._sharedData.invScaleY))}applyTorque(e){this._body===null&&this.createBody(),this._body.SetAwake(!0),this._body.ApplyTorque(e)}applyAngularImpulse(e){this._body===null&&this.createBody(),this._body.SetAwake(!0),this._body.ApplyAngularImpulse(e)}getMassCenterX(){return this._body===null&&this.createBody(),this._body.GetWorldCenter().get_x()*this._sharedData.scaleX}getMassCenterY(){return this._body===null&&this.createBody(),this._body.GetWorldCenter().get_y()*this._sharedData.scaleY}isJointFirstObject(e){if(this._body===null)return this.createBody(),!1;const t=this._sharedData.getJoint(e);return t===null?!1:t.GetBodyA()===this._body}isJointSecondObject(e){if(this._body===null)return this.createBody(),!1;const t=this._sharedData.getJoint(e);return t===null?!1:t.GetBodyB()===this._body}getJointFirstAnchorX(e){const t=this._sharedData.getJoint(e);return t===null?0:t.GetBodyA().GetWorldPoint(t.GetLocalAnchorA()).get_x()}getJointFirstAnchorY(e){const t=this._sharedData.getJoint(e);return t===null?0:t.GetBodyA().GetWorldPoint(t.GetLocalAnchorA()).get_y()}getJointSecondAnchorX(e){const t=this._sharedData.getJoint(e);return t===null?0:t.GetBodyB().GetWorldPoint(t.GetLocalAnchorB()).get_x()}getJointSecondAnchorY(e){const t=this._sharedData.getJoint(e);return t===null?0:t.GetBodyB().GetWorldPoint(t.GetLocalAnchorB()).get_y()}getJointReactionForce(e){const t=this._sharedData.getJoint(e);return t===null?0:t.GetReactionForce(1/this._sharedData.timeStep).Length()}getJointReactionTorque(e){const t=this._sharedData.getJoint(e);return t===null?0:t.GetReactionTorque(1/this._sharedData.timeStep)}removeJoint(e){this._sharedData.removeJoint(e)}addDistanceJoint(e,t,i,s,n,o,a,l,_,c){if(this._body===null&&this.createBody(),i==null||!i.hasBehavior(this.name))return;const r=i.getBehavior(this.name).getBody();if(this._body===r)return;const d=new Box2D.b2DistanceJointDef;d.set_bodyA(this._body),d.set_localAnchorA(this._body.GetLocalPoint(this.b2Vec2(e*this._sharedData.invScaleX,t*this._sharedData.invScaleY))),d.set_bodyB(r),d.set_localAnchorB(r.GetLocalPoint(this.b2Vec2(s*this._sharedData.invScaleX,n*this._sharedData.invScaleY))),d.set_length(o>0?o*this._sharedData.invScaleX:this.b2Vec2((s-e)*this._sharedData.invScaleX,(n-t)*this._sharedData.invScaleY).Length()),d.set_frequencyHz(a>=0?a:0),d.set_dampingRatio(l>=0?l:1),d.set_collideConnected(_);const g=this._sharedData.addJoint(Box2D.castObject(this._sharedData.world.CreateJoint(d),Box2D.b2DistanceJoint));c.setNumber(g)}getDistanceJointLength(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_distanceJoint?0:t.GetLength()*this._sharedData.scaleX}setDistanceJointLength(e,t){if(t<=0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_distanceJoint||(i.SetLength(t*this._sharedData.invScaleX),i.GetBodyA().SetAwake(!0),i.GetBodyB().SetAwake(!0))}getDistanceJointFrequency(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_distanceJoint?0:t.GetFrequency()}setDistanceJointFrequency(e,t){if(t<0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_distanceJoint||i.SetFrequency(t)}getDistanceJointDampingRatio(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_distanceJoint?0:t.GetDampingRatio()}setDistanceJointDampingRatio(e,t){if(t<0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_distanceJoint,i.SetDampingRatio(t)}addRevoluteJoint(e,t,i,s,n,o,a,l,_,c){this._body===null&&this.createBody();const r=new Box2D.b2RevoluteJointDef;if(r.set_bodyA(this._sharedData.staticBody),r.set_localAnchorA(this._sharedData.staticBody.GetLocalPoint(this.b2Vec2(e*this._sharedData.invScaleX,t*this._sharedData.invScaleY))),r.set_bodyB(this._body),r.set_localAnchorB(this._body.GetLocalPoint(this.b2Vec2(e*this._sharedData.invScaleX,t*this._sharedData.invScaleY))),r.set_enableLimit(i),r.set_referenceAngle(h.toRad(s)),o<n){const g=n;n=o,o=g}r.set_lowerAngle(h.toRad(n)),r.set_upperAngle(h.toRad(o)),r.set_enableMotor(a),r.set_motorSpeed(h.toRad(l)),r.set_maxMotorTorque(_>=0?_:0),r.set_collideConnected(!1);const d=this._sharedData.addJoint(Box2D.castObject(this._sharedData.world.CreateJoint(r),Box2D.b2RevoluteJoint));c.setNumber(d)}addRevoluteJointBetweenTwoBodies(e,t,i,s,n,o,a,l,_,c,r,d,g,f){if(this._body===null&&this.createBody(),i==null||!i.hasBehavior(this.name))return;const y=i.getBehavior(this.name).getBody();if(this._body===y)return;const u=new Box2D.b2RevoluteJointDef;if(u.set_bodyA(this._body),u.set_localAnchorA(this._body.GetLocalPoint(this.b2Vec2(e*this._sharedData.invScaleX,t*this._sharedData.invScaleY))),u.set_bodyB(y),u.set_localAnchorB(y.GetLocalPoint(this.b2Vec2(s*this._sharedData.invScaleX,n*this._sharedData.invScaleY))),u.set_enableLimit(o),u.set_referenceAngle(h.toRad(a)),_<l){const J=l;l=_,_=J}u.set_lowerAngle(h.toRad(l)),u.set_upperAngle(h.toRad(_)),u.set_enableMotor(c),u.set_motorSpeed(h.toRad(r)),u.set_maxMotorTorque(d>=0?d:0),u.set_collideConnected(g);const D=this._sharedData.addJoint(Box2D.castObject(this._sharedData.world.CreateJoint(u),Box2D.b2RevoluteJoint));f.setNumber(D)}getRevoluteJointReferenceAngle(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_revoluteJoint?0:h.toDegrees(t.GetReferenceAngle())}getRevoluteJointAngle(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_revoluteJoint?0:h.toDegrees(t.GetJointAngle())}getRevoluteJointSpeed(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_revoluteJoint?0:h.toDegrees(t.GetJointSpeed())}isRevoluteJointLimitsEnabled(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_revoluteJoint?!1:t.IsLimitEnabled()}enableRevoluteJointLimits(e,t){const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_revoluteJoint||i.EnableLimit(t)}getRevoluteJointMinAngle(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_revoluteJoint?0:h.toDegrees(t.GetLowerLimit())}getRevoluteJointMaxAngle(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_revoluteJoint?0:h.toDegrees(t.GetUpperLimit())}setRevoluteJointLimits(e,t,i){const s=this._sharedData.getJoint(e);if(!(s===null||s.GetType()!==Box2D.e_revoluteJoint)){if(i<t){const n=t;t=i,i=n}s.SetLimits(h.toRad(t),h.toRad(i))}}isRevoluteJointMotorEnabled(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_revoluteJoint?!1:t.IsMotorEnabled()}enableRevoluteJointMotor(e,t){const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_revoluteJoint||i.EnableMotor(t)}getRevoluteJointMotorSpeed(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_revoluteJoint?0:h.toDegrees(t.GetMotorSpeed())}setRevoluteJointMotorSpeed(e,t){const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_revoluteJoint||i.SetMotorSpeed(h.toRad(t))}getRevoluteJointMaxMotorTorque(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_revoluteJoint?0:t.GetMaxMotorTorque()}setRevoluteJointMaxMotorTorque(e,t){if(t<0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_revoluteJoint||i.SetMaxMotorTorque(t)}getRevoluteJointMotorTorque(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_revoluteJoint?0:t.GetMotorTorque(1/this._sharedData.timeStep)}addPrismaticJoint(e,t,i,s,n,o,a,l,_,c,r,d,g,f,y){if(this._body===null&&this.createBody(),i==null||!i.hasBehavior(this.name))return;const u=i.getBehavior(this.name).getBody();if(this._body===u)return;const D=new Box2D.b2PrismaticJointDef;if(D.set_bodyA(this._body),D.set_localAnchorA(this._body.GetLocalPoint(this.b2Vec2(e*this._sharedData.invScaleX,t*this._sharedData.invScaleY))),D.set_bodyB(u),D.set_localAnchorB(u.GetLocalPoint(this.b2Vec2(s*this._sharedData.invScaleX,n*this._sharedData.invScaleY))),o=h.toRad(o)-this._body.GetAngle(),D.set_localAxisA(this.b2Vec2(Math.cos(o),Math.sin(o))),D.set_referenceAngle(h.toRad(a)),D.set_enableLimit(l),c<_){const S=_;_=c,c=S}D.set_lowerTranslation(_<0?_*this._sharedData.invScaleX:0),D.set_upperTranslation(c>0?c*this._sharedData.invScaleX:0),D.set_enableMotor(r),D.set_motorSpeed(d*this._sharedData.invScaleX),D.set_maxMotorForce(g),D.set_collideConnected(f);const J=this._sharedData.addJoint(Box2D.castObject(this._sharedData.world.CreateJoint(D),Box2D.b2PrismaticJoint));y.setNumber(J)}getPrismaticJointAxisAngle(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_prismaticJoint?0:h.toDegrees(Math.atan2(t.GetLocalAxisA().get_y(),t.GetLocalAxisA().get_x())+t.GetBodyA().GetAngle())}getPrismaticJointReferenceAngle(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_prismaticJoint?0:h.toDegrees(t.GetReferenceAngle())}getPrismaticJointTranslation(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_prismaticJoint?0:t.GetJointTranslation()*this._sharedData.scaleX}getPrismaticJointSpeed(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_prismaticJoint?0:t.GetJointSpeed()*this._sharedData.scaleX}isPrismaticJointLimitsEnabled(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_prismaticJoint?!1:t.IsLimitEnabled()}enablePrismaticJointLimits(e,t){const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_prismaticJoint||i.EnableLimit(t)}getPrismaticJointMinTranslation(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_prismaticJoint?0:t.GetLowerLimit()*this._sharedData.scaleX}getPrismaticJointMaxTranslation(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_prismaticJoint?0:t.GetUpperLimit()*this._sharedData.scaleX}setPrismaticJointLimits(e,t,i){const s=this._sharedData.getJoint(e);if(!(s===null||s.GetType()!==Box2D.e_prismaticJoint)){if(i<t){const n=t;t=i,i=n}t=t<0?t:0,i=i>0?i:0,s.SetLimits(t*this._sharedData.invScaleX,i*this._sharedData.invScaleX)}}isPrismaticJointMotorEnabled(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_prismaticJoint?!1:t.IsMotorEnabled()}enablePrismaticJointMotor(e,t){const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_prismaticJoint||i.EnableMotor(t)}getPrismaticJointMotorSpeed(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_prismaticJoint?0:t.GetMotorSpeed()*this._sharedData.scaleX}setPrismaticJointMotorSpeed(e,t){const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_prismaticJoint||i.SetMotorSpeed(t*this._sharedData.invScaleX)}getPrismaticJointMaxMotorForce(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_prismaticJoint?0:t.GetMaxMotorForce()}setPrismaticJointMaxMotorForce(e,t){if(t<0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_prismaticJoint||i.SetMaxMotorForce(t)}getPrismaticJointMotorForce(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_prismaticJoint?0:t.GetMotorForce(1/this._sharedData.timeStep)}addPulleyJoint(e,t,i,s,n,o,a,l,_,c,r,d,g,f){if(this._body===null&&this.createBody(),i==null||!i.hasBehavior(this.name))return;const y=i.getBehavior(this.name).getBody();if(this._body===y)return;const u=new Box2D.b2PulleyJointDef;u.set_bodyA(this._body),u.set_localAnchorA(this._body.GetLocalPoint(this.b2Vec2(e*this._sharedData.invScaleX,t*this._sharedData.invScaleY))),u.set_bodyB(y),u.set_localAnchorB(y.GetLocalPoint(this.b2Vec2(s*this._sharedData.invScaleX,n*this._sharedData.invScaleY))),u.set_groundAnchorA(this.b2Vec2(o*this._sharedData.invScaleX,a*this._sharedData.invScaleY)),u.set_groundAnchorB(this.b2Vec2(l*this._sharedData.invScaleX,_*this._sharedData.invScaleY)),u.set_lengthA(c>0?c*this._sharedData.invScaleX:this.b2Vec2((o-e)*this._sharedData.invScaleX,(a-t)*this._sharedData.invScaleY).Length()),u.set_lengthB(r>0?r*this._sharedData.invScaleX:this.b2Vec2((l-s)*this._sharedData.invScaleX,(_-n)*this._sharedData.invScaleY).Length()),u.set_ratio(d>0?d:1),u.set_collideConnected(g);const D=this._sharedData.addJoint(Box2D.castObject(this._sharedData.world.CreateJoint(u),Box2D.b2PulleyJoint));f.setNumber(D)}getPulleyJointFirstGroundAnchorX(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_pulleyJoint?0:t.GetGroundAnchorA().get_x()*this._sharedData.scaleX}getPulleyJointFirstGroundAnchorY(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_pulleyJoint?0:t.GetGroundAnchorA().get_y()*this._sharedData.scaleY}getPulleyJointSecondGroundAnchorX(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_pulleyJoint?0:t.GetGroundAnchorB().get_x()*this._sharedData.scaleX}getPulleyJointSecondGroundAnchorY(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_pulleyJoint?0:t.GetGroundAnchorB().get_y()*this._sharedData.scaleY}getPulleyJointFirstLength(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_pulleyJoint?0:t.GetCurrentLengthA()*this._sharedData.scaleX}getPulleyJointSecondLength(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_pulleyJoint?0:t.GetCurrentLengthB()*this._sharedData.scaleX}getPulleyJointRatio(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_pulleyJoint?0:t.GetRatio()}addGearJoint(e,t,i,s,n){this._body===null&&this.createBody();const o=this._sharedData.getJoint(e);if(o===null||o.GetType()!==Box2D.e_revoluteJoint&&o.GetType()!==Box2D.e_prismaticJoint)return;const a=this._sharedData.getJoint(t);if(a===null||a.GetType()!==Box2D.e_revoluteJoint&&a.GetType()!==Box2D.e_prismaticJoint||o===a)return;const l=new Box2D.b2GearJointDef;l.set_bodyA(this._sharedData.staticBody),l.set_bodyB(this._body),l.set_joint1(o),l.set_joint2(a),l.set_ratio(i),l.set_collideConnected(s);const _=this._sharedData.addJoint(Box2D.castObject(this._sharedData.world.CreateJoint(l),Box2D.b2GearJoint));n.setNumber(_)}getGearJointFirstJoint(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_gearJoint?0:this._sharedData.getJointId(t.GetJoint1())}getGearJointSecondJoint(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_gearJoint?0:this._sharedData.getJointId(t.GetJoint2())}getGearJointRatio(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_gearJoint?0:t.GetRatio()}setGearJointRatio(e,t){const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_gearJoint||(i.SetRatio(t),i.GetBodyA().SetAwake(!0),i.GetBodyB().SetAwake(!0))}addMouseJoint(e,t,i,s,n,o){this._body===null&&this.createBody();const a=new Box2D.b2MouseJointDef;a.set_bodyA(this._sharedData.staticBody),a.set_bodyB(this._body),a.set_target(this.b2Vec2(e*this._sharedData.invScaleX,t*this._sharedData.invScaleY)),a.set_maxForce(i>=0?i:0),a.set_frequencyHz(s>0?s:1),a.set_dampingRatio(n>=0?n:0);const l=this._sharedData.addJoint(Box2D.castObject(this._sharedData.world.CreateJoint(a),Box2D.b2MouseJoint));o.setNumber(l)}getMouseJointTargetX(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_mouseJoint?0:t.GetTarget().get_x()*this._sharedData.scaleX}getMouseJointTargetY(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_mouseJoint?0:t.GetTarget().get_y()*this._sharedData.scaleY}setMouseJointTarget(e,t,i){const s=this._sharedData.getJoint(e);s===null||s.GetType()!==Box2D.e_mouseJoint||(s.SetTarget(this.b2Vec2(t*this._sharedData.invScaleX,i*this._sharedData.invScaleY)),s.GetBodyB().SetAwake(!0))}getMouseJointMaxForce(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_mouseJoint?0:t.GetMaxForce()}setMouseJointMaxForce(e,t){if(t<0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_mouseJoint||i.SetMaxForce(t)}getMouseJointFrequency(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_mouseJoint?0:t.GetFrequency()}setMouseJointFrequency(e,t){if(t<=0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_mouseJoint||i.SetFrequency(t)}getMouseJointDampingRatio(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_mouseJoint?0:t.GetDampingRatio()}setMouseJointDampingRatio(e,t){if(t<0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_mouseJoint||i.SetDampingRatio(t)}addWheelJoint(e,t,i,s,n,o,a,l,_,c,r,d,g){if(this._body===null&&this.createBody(),i==null||!i.hasBehavior(this.name))return;const f=i.getBehavior(this.name).getBody();if(this._body===f)return;const y=new Box2D.b2WheelJointDef;y.set_bodyA(this._body),y.set_localAnchorA(this._body.GetLocalPoint(this.b2Vec2(e*this._sharedData.invScaleX,t*this._sharedData.invScaleY))),y.set_bodyB(f),y.set_localAnchorB(f.GetLocalPoint(this.b2Vec2(s*this._sharedData.invScaleX,n*this._sharedData.invScaleY))),o=h.toRad(o)-this._body.GetAngle(),y.set_localAxisA(this.b2Vec2(Math.cos(o),Math.sin(o))),y.set_frequencyHz(a>0?a:1),y.set_dampingRatio(l>=0?l:0),y.set_enableMotor(_),y.set_motorSpeed(h.toRad(c)),y.set_maxMotorTorque(r),y.set_collideConnected(d);const u=this._sharedData.addJoint(Box2D.castObject(this._sharedData.world.CreateJoint(y),Box2D.b2WheelJoint));g.setNumber(u)}getWheelJointAxisAngle(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_wheelJoint?0:h.toDegrees(Math.atan2(t.GetLocalAxisA().get_y(),t.GetLocalAxisA().get_x())+t.GetBodyA().GetAngle())}getWheelJointTranslation(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_wheelJoint?0:t.GetJointTranslation()*this._sharedData.scaleX}getWheelJointSpeed(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_wheelJoint?0:h.toDegrees(t.GetJointSpeed())}isWheelJointMotorEnabled(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_wheelJoint?!1:t.IsMotorEnabled()}enableWheelJointMotor(e,t){const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_wheelJoint||i.EnableMotor(t)}getWheelJointMotorSpeed(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_wheelJoint?0:h.toDegrees(t.GetMotorSpeed())}setWheelJointMotorSpeed(e,t){const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_wheelJoint||i.SetMotorSpeed(h.toRad(t))}getWheelJointMaxMotorTorque(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_wheelJoint?0:t.GetMaxMotorTorque()}setWheelJointMaxMotorTorque(e,t){if(t<0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_wheelJoint||i.SetMaxMotorTorque(t)}getWheelJointMotorTorque(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_wheelJoint?0:t.GetMotorTorque(1/this._sharedData.timeStep)}getWheelJointFrequency(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_wheelJoint?0:t.GetSpringFrequencyHz()}setWheelJointFrequency(e,t){if(t<0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_wheelJoint||i.SetSpringFrequencyHz(t)}getWheelJointDampingRatio(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_wheelJoint?0:t.GetSpringDampingRatio()}setWheelJointDampingRatio(e,t){if(t<0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_wheelJoint||i.SetSpringDampingRatio(t)}addWeldJoint(e,t,i,s,n,o,a,l,_,c){if(this._body===null&&this.createBody(),i==null||!i.hasBehavior(this.name))return;const r=i.getBehavior(this.name).getBody();if(this._body===r)return;const d=new Box2D.b2WeldJointDef;d.set_bodyA(this._body),d.set_localAnchorA(this._body.GetLocalPoint(this.b2Vec2(e*this._sharedData.invScaleX,t*this._sharedData.invScaleY))),d.set_bodyB(r),d.set_localAnchorB(r.GetLocalPoint(this.b2Vec2(s*this._sharedData.invScaleX,n*this._sharedData.invScaleY))),d.set_referenceAngle(h.toRad(o)),d.set_frequencyHz(a>0?a:1),d.set_dampingRatio(l>=0?l:0),d.set_collideConnected(_);const g=Box2D.castObject(this._sharedData.world.CreateJoint(d),Box2D.b2WeldJoint);g.referenceAngle=d.get_referenceAngle(),c.setNumber(this._sharedData.addJoint(g))}getWeldJointReferenceAngle(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_weldJoint?0:h.toDegrees(t.referenceAngle)}getWeldJointFrequency(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_weldJoint?0:t.GetFrequency()}setWeldJointFrequency(e,t){if(t<0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_weldJoint||i.SetFrequency(t)}getWeldJointDampingRatio(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_weldJoint?0:t.GetDampingRatio()}setWeldJointDampingRatio(e,t){if(t<0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_weldJoint||i.SetDampingRatio(t)}addRopeJoint(e,t,i,s,n,o,a,l){if(this._body===null&&this.createBody(),i==null||!i.hasBehavior(this.name))return;const _=i.getBehavior(this.name).getBody();if(this._body===_)return;const c=new Box2D.b2RopeJointDef;c.set_bodyA(this._body),c.set_localAnchorA(this._body.GetLocalPoint(this.b2Vec2(e*this._sharedData.invScaleX,t*this._sharedData.invScaleY))),c.set_bodyB(_),c.set_localAnchorB(_.GetLocalPoint(this.b2Vec2(s*this._sharedData.invScaleX,n*this._sharedData.invScaleY))),c.set_maxLength(o>0?o*this._sharedData.invScaleX:this.b2Vec2((s-e)*this._sharedData.invScaleX,(n-t)*this._sharedData.invScaleY).Length()),c.set_collideConnected(a);const r=this._sharedData.addJoint(Box2D.castObject(this._sharedData.world.CreateJoint(c),Box2D.b2RopeJoint));l.setNumber(r)}getRopeJointMaxLength(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_ropeJoint?0:t.GetMaxLength()*this._sharedData.scaleX}setRopeJointMaxLength(e,t){if(t<0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_ropeJoint||(i.SetMaxLength(t*this._sharedData.invScaleX),i.GetBodyA().SetAwake(!0),i.GetBodyB().SetAwake(!0))}addFrictionJoint(e,t,i,s,n,o,a,l,_){if(this._body===null&&this.createBody(),i==null||!i.hasBehavior(this.name))return;const c=i.getBehavior(this.name).getBody();if(this._body===c)return;const r=new Box2D.b2FrictionJointDef;r.set_bodyA(this._body),r.set_localAnchorA(this._body.GetLocalPoint(this.b2Vec2(e*this._sharedData.invScaleX,t*this._sharedData.invScaleY))),r.set_bodyB(c),r.set_localAnchorB(c.GetLocalPoint(this.b2Vec2(s*this._sharedData.invScaleX,n*this._sharedData.invScaleY))),r.set_maxForce(o>=0?o:0),r.set_maxTorque(a>=0?a:0),r.set_collideConnected(l);const d=this._sharedData.addJoint(Box2D.castObject(this._sharedData.world.CreateJoint(r),Box2D.b2FrictionJoint));_.setNumber(d)}getFrictionJointMaxForce(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_frictionJoint?0:t.GetMaxForce()}setFrictionJointMaxForce(e,t){if(t<0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_frictionJoint||i.SetMaxForce(t)}getFrictionJointMaxTorque(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_frictionJoint?0:t.GetMaxTorque()}setFrictionJointMaxTorque(e,t){if(t<0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_frictionJoint||i.SetMaxTorque(t)}addMotorJoint(e,t,i,s,n,o,a,l,_){if(this._body===null&&this.createBody(),e==null||!e.hasBehavior(this.name))return;const c=e.getBehavior(this.name).getBody();if(this._body===c)return;const r=new Box2D.b2MotorJointDef;r.set_bodyA(this._body),r.set_bodyB(c),r.set_linearOffset(this.b2Vec2(t*this._sharedData.invScaleX,i*this._sharedData.invScaleY)),r.set_angularOffset(h.toRad(s)),r.set_maxForce(n>=0?n:0),r.set_maxTorque(o>=0?o:0),r.set_correctionFactor(a<0?0:a>1?1:a),r.set_collideConnected(l);const d=this._sharedData.addJoint(Box2D.castObject(this._sharedData.world.CreateJoint(r),Box2D.b2MotorJoint));_.setNumber(d)}getMotorJointOffsetX(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_motorJoint?0:t.GetLinearOffset().get_x()*this._sharedData.scaleX}getMotorJointOffsetY(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_motorJoint?0:t.GetLinearOffset().get_y()*this._sharedData.scaleY}setMotorJointOffset(e,t,i){const s=this._sharedData.getJoint(e);s===null||s.GetType()!==Box2D.e_motorJoint||s.SetLinearOffset(this.b2Vec2(t*this._sharedData.invScaleX,i*this._sharedData.invScaleY))}getMotorJointAngularOffset(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_motorJoint?0:h.toDegrees(t.GetAngularOffset())}setMotorJointAngularOffset(e,t){const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_motorJoint||i.SetAngularOffset(h.toRad(t))}getMotorJointMaxForce(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_motorJoint?0:t.GetMaxForce()}setMotorJointMaxForce(e,t){if(t<0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_motorJoint||i.SetMaxForce(t)}getMotorJointMaxTorque(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_motorJoint?0:t.GetMaxTorque()}setMotorJointMaxTorque(e,t){if(t<0)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_motorJoint||(i.SetMaxTorque(t),i.GetBodyA().SetAwake(!0),i.GetBodyB().SetAwake(!0))}getMotorJointCorrectionFactor(e){const t=this._sharedData.getJoint(e);return t===null||t.GetType()!==Box2D.e_motorJoint?0:t.GetCorrectionFactor()}setMotorJointCorrectionFactor(e,t){if(t<0||t>1)return;const i=this._sharedData.getJoint(e);i===null||i.GetType()!==Box2D.e_motorJoint||(i.SetCorrectionFactor(t),i.GetBodyA().SetAwake(!0),i.GetBodyB().SetAwake(!0))}static collisionTest(e,t,i){const s=e.getBehavior(i);if(s){for(let n=0,o=s.currentContacts.length;n<o;++n)if(s.currentContacts[n].owner===t)return!0}return!1}}h.Physics2RuntimeBehavior=b,h.registerBehavior("Physics2::Physics2Behavior",h.Physics2RuntimeBehavior)})(gdjs||(gdjs={}));
//# sourceMappingURL=physics2runtimebehavior.js.map
